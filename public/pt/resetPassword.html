<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="keywords" content="服饰,美妆,引流,电商,流量,购物,潮流,资讯"><meta name="viewport" content="user-scalable=yes"><link rel="stylesheet" href="./css/regster.css"><meta name="description" content="四川神龟科技有限公司成立于2017年05月，旗下平台“超神宿APP”，着力于服饰与美妆领域，通过互联网连接实体门店与消费者，为品牌和用户提供优质服务。超神宿对用户进行精准分析，通过线上商品的展示和销售，有效地为实体商家实现线上至线下引流，以及品牌线上新品发布、活动促销和推广宣传等。旗下项目“流量小店”，有效整合各经销商、生产商的资源，以便利店的形式在全国范围内开设直营与加盟店。依托线上平台的庞大流量，将线上平台与线下门店相互结合，为用户提供更加便捷的购物体验。"><title>四川神龟科技-商家平台-重置密码</title><script src="./libs/jquery.min.js"></script><script src="./libsTwo/layer/layer.js"></script><script src="./libs/jquery.placeholder.min.js"></script><script src="./js/http.js"></script><!--[if lte IE 9]>
    <script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/jquery-ajaxtransport-xdomainrequest/1.0.3/jquery.xdomainrequest.min.js'></script>
    <![endif]--></head><body><div class="page-box"><img src="./images/bj_denglu.png" class="page-bg"> <img src="./images/ic_chaoshensu.png" class="logo"><div class="content-box"><div class="title">重置密码</div><div class="el-steps-box"><div class="el-steps-item fl active" id="steps1"><div class="el-step-head"><div class="el-step__icon" id="stepsText1">✔</div><div class="el-step__line"></div></div><div class="el-step__main"><div class="el-step__title">填写账号</div></div></div><div class="el-steps-item fl" id="steps2"><div class="el-step-head"><div class="el-step__icon" id="stepsText2">2</div><div class="el-step__line el-step_line_center"></div></div><div class="el-step__main"><div class="el-step__title">验证动态码</div></div></div><div class="el-steps-item fl" id="steps3"><div class="el-step-head"><div class="el-step__icon" id="stepsText3">3</div><div class="el-step__line el-step_line_center"></div></div><div class="el-step__main"><div class="el-step__title">重置账号密码</div></div></div><div class="el-steps-item fl" id="steps4"><div class="el-step-head"><div class="el-step__icon" id="stepsText4">4</div><div class="el-step__line el-step_line_left"></div></div><div class="el-step__main"><div class="el-step__title">完成重置密码</div></div></div></div><!--  第一步 --><div class="step-1 none" id="step-1"><div class="info-box" style="margin-top: 100px;"><div class="form-item-block"><img src="./images/username.png" class="phone-icon fl" style="width: 26px;height: 28px;"> <input type="text" name="mobile" placeholder="请输入注册的手机号" class="ipt fl" autocomplete="off"></div><div class="btn-box"><div class="btn reg-btn hover" onclick="getMobileCode()">下一步</div><div class="gotoback"><a href="./enterExplain.html" style="color: #333;">立即登录</a></div></div></div></div><!--  第二步 --><div class="step-2 none" id="step-2"><div class="send-code-tips" style="width: 82%;"><img src="./images/ic_tixing.png" class="tixing-icon fl"><div class="code-tips-text fl">已经向您的手机号<span id="w-tel"></span>发送了动态验证码，请在60秒之内完成验证。</div></div><div class="info-box"><div class="form-item-block"><img src="./images/ic_shezhi.png" class="phone-icon fl"> <input type="text" name="code" placeholder="请输入验证码" class="ipt code-ipt fl" autocomplete="off"><div class="time-end" id="djsBox"><span id="timeS">59</span>秒后重新发</div><div class="time-end hover" id="resetSendBtn">重新发送</div></div><div class="code-tips">*短信验证码为4位纯数字</div><div class="btn-box"><div class="btn reg-btn hover" onclick="nextStopFn()">下一步</div><div class="gotoback" onclick="steps(1)">返回上页</div></div></div></div><!--  第三步 --><div class="step-3 none" id="step-3"><div class="info-box" style="margin-top: 120px;"><div class="form-item-block"><img src="./images/ic_shezhi.png" class="phone-icon fl"> <input type="password" name="newPassword" placeholder="请设置新的账号密码" class="ipt fl" id="paw"> <img src="./images/show_password.png" class="see-icon hover bi-icon" id="biPsd"> <img src="./images/ic_zhengyan.png" class="see-icon hover" id="showPsd" style="display: none;"></div><div class="code-tips">*账号密码为8-16位字母和数字组合</div><div class="btn-box"><div class="btn reg-btn hover" onclick="onSubmitPsd()">提交</div></div></div></div><!----><!--  第四步 --><div class="step-4 none" id="step-4"><div class="info-box" style="margin-top: 120px;"><div class="success-icon-box"><img src="./images/ic_wancheng.png" class="success-icon"></div><p class="success-tips">恭喜，您已完成账号密码重置。</p><div class="btn-box center-btn-box"><a class="btn reg-btn hover" href="./enterExplain.html">立即登录</a></div></div></div><!----></div><div class="reg-footer">© Copyright©2017-2019 超神宿有限公司版权所有</div></div></body><script>// function seePassword(_this) {
    //     $(_this).parent().find('input.ipt').attr('type', 'text');
    //     $(_this).hide();
    //     $("#showPsd").show();
    // }
    // function noSeePassword(_this) {
    //     $(_this).parent().find('input.ipt').attr('type', 'password');
    //     $(_this).hide();
    //     $("#biPsd").show();
    // }
    //显示密码
    $('#biPsd').mousedown(function(){
        $('#paw')[0].type = 'text';
        $(this).hide();
        $("#showPsd").show();
    })
    //隐藏密码
    $("#showPsd").mouseup(function(){
        $('#paw')[0].type = 'password';
        $(this).hide();
        $("#biPsd").show();
    })
    // 当前步骤
    function steps(now_step) {
        for(var i = 1 ; i <= 4 ; i++) {
            if (i < now_step) {
                $("#steps"+i).addClass('active');
                $("#stepsText"+i).text('✔');
            } else if (i == now_step) {
                $("#steps"+i).addClass('active');
                $("#stepsText"+i).text(i);
            } else {
                $("#steps"+i).removeClass('active');
                $("#stepsText"+i).text(i);
            }
            if (now_step==4) {
                $("#stepsText4").text('✔');
            }
            //
            if (i==now_step) {
                $("#step-"+i).show()
            } else {
                $("#step-"+i).hide()
            }
        }
    }
    //
    function getMobileCode() {
        var mobile = $("input[name=mobile]").val();
        if (!mobile) {
            layer.msg('请输入注册的手机号');
            return false;
        }
        if(!checkType(mobile, 'phone')) {
            layer.msg('请输入正确的手机号');
            return false;
        } else {
            getPhoneCode(mobile)
        }
        // if(mobil_email.indexOf('@')>=0){
        //     if(!checkType(mobil_email, 'email')) {
        //         layer.msg('请输入正确的邮箱地址');
        //         return false;
        //     } else {
        //         getEmailCode(mobil_email)
        //     }
        // } else {
        //     if(!checkType(mobil_email, 'phone')) {
        //         layer.msg('请输入正确的手机号');
        //         return false;
        //     } else {
        //         getPhoneCode(mobil_email)
        //     }
        // }
    }
    // 获取手机验证码
    function getPhoneCode(mobile){
        var loadIndex = layer.load();
        ajaxPost('/store_v1/index/getVerifyCode',{
            mobile: mobile,
            mobile_type: '1', // 是否已注册 1是 2否
        },function(res){
            layer.close(loadIndex);
            if (res.status == 1) {
                $("#w-tel").html(mobile.slice(0,3) + '****' + mobile.slice(7));
                $("#djsBox").show();
                $("#resetSendBtn").hide();
                steps(2);
                var time_s = 59;
                var timer = null;
                timer = setInterval(function(){
                    time_s--;
                    if(time_s<0){
                        clearInterval(timer);
                        $("#timeS").text(59);
                        $("#djsBox").hide();
                        $("#resetSendBtn").show();
                    }else{
                        $("#timeS").text(time_s);
                    }
                }, 1000)
            } else {
                layer.msg(res.msg)
            }
        },function(err){
            layer.close(loadIndex);
            layer.msg('获取手机验证码接口报错');
        });
    }
    // 获取邮箱code
    function getEmailCode(email) {
        var loadIndex = layer.load();
        ajaxPost('/store_v1/index/getVerifyemail',{
            email: email
        },function(res){
            layer.close(loadIndex);
            if (res.status == 1) {
                $("#djsBox").show();
                $("#resetSendBtn").hide();
                steps(2);
                var time_s = 59;
                var timer = null;
                timer = setInterval(function(){
                    time_s--;
                    if(time_s<0){
                        clearInterval(timer);
                        $("#timeS").text(59);
                        $("#djsBox").hide();
                        $("#resetSendBtn").show();
                    }else{
                        $("#timeS").text(time_s);
                    }
                }, 1000)
            } else {
                layer.msg(res.msg)
            }
        },function(err){
            layer.close(loadIndex);
            alert('获取邮箱验证码接口报错');
        })
    }
    // 第二步 下一步
    function nextStopFn() {
        var mobile = $("input[name=mobile]").val();
        var code = $("input[name=code]").val();
        if (!code) {
            layer.msg('请输入验证码');
            return false
        }
        var loadIndex = layer.load();
        ajaxPost('/store_v1/shop/chen_code',{ // 短信或邮箱验证码--验证
            mobile: mobile,
            code: code,
            type: '1', // 1短信 2邮箱
        },function(res){
            layer.close(loadIndex);
            if(res.status == 1) {
                steps(3)
            } else {
                layer.msg(res.msg)
            }
        }, function(err){
            layer.close(loadIndex);
            layer.msg('验证手机验证码接口报错');
        })
    }
    // 第三步 提交
    function onSubmitPsd() {
        var mobile = $("input[name=mobile]").val();
        var code = $("input[name=code]").val();
        var password = $("input[name=newPassword]").val();
        if(!checkType(password, 'psd')){
            layer.msg('密码格式不正确');
            return false;
        }
        var loadIndex = layer.load();
        ajaxPost('/store_v1/index/resetpwd',{
            mobile: mobile,
            code: code,
            password: password
        },function(res){
            layer.close(loadIndex);
            if(res.status == 1) {
                steps(4)
            } else {
                layer.msg(res.msg)
            }
        }, function(err){
            layer.close(loadIndex);
            layer.msg('找回密码接口报错');
        })
    }
    $(function(){
        steps(1);
        // 兼容ie placeholder
        $('input,textarea').placeholder();
        $("#resetSendBtn").click(function(){
            getMobileCode()
        })
    })</script></html>